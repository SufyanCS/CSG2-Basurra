@{
    Layout = null;
    var courseCount = Model.Courses.Count;
    var userCount = Model.Users.Count;
    var lessonCount = Model.Lessons.Count;


}
@model Coders_Zone.Models.DashboardViewModel

<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="d-flex flex-row flex-grow-1" style="height: 200vh";>
    <div class="d-flex flex-column flex-shrink-0 p-3 text-white bg-dark h-full col-sm-2 md:col-md-2 ">
        <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
          <svg class="bi me-2" width="40" height="32"></svg>
          <span class="fs-5">Coders Zone</span>
        </a>
        <hr>
        <ul class="nav nav-pills flex-column mb-auto">
          <li class="nav-item">
            <a href="#" class="nav-link text-white" aria-current="page" onclick="showHomeForm()">
              <svg class="bi me-2" width="16" height="16"></svg>
              Statistics
            </a>
          </li>
          <li>
            <a href="#" class="nav-link text-white" onclick="showDashboardForm()">
              <svg class="bi me-2" width="16" height="16"></svg>
              Courses
            </a>
          </li>
          <li>
            <a href="#" class="nav-link text-white" onclick="showUsersForm()">
              <svg class="bi me-2" width="16" height="16"></svg>
              Users
            </a>
          </li>
        </ul>
        <hr>
    </div>


    <div class="col-sm-10 md:col-md-10 px-5 ">
        <h1 id="heading">Admin Dashboard</h1>


        <div id="homeForm" style="display: none;">
                <div class="container">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card h-100 bg-danger p-2 text-dark bg-opacity-25">
                                <div class="card-body d-flex flex-column justify-content-center align-items-sm-center" style=" height: 250px;">
                                    <h2 class="card-title">Total Courses</h2>
                                    <h4 class="card-text fw-bold">@courseCount Courses</h4>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100 bg-success p-2 text-dark bg-opacity-25" ;>
                                <div class="card-body d-flex flex-column justify-content-center align-items-sm-center">
                                    <h2 class="card-title">Total Lessons</h2>
                                    <h4 class="card-text fw-bold">@lessonCount Lessons</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 ">
                            <div class="card h-100 bg-primary-subtle">
                                <div class="card-body d-flex flex-column justify-content-center align-items-sm-center" style=" height: 250px;">
                                    <h2 class="card-title">Total</h2>
                                    <h4 class="card-text fw-bold"></h4>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100 bg-warning p-2 text-dark bg-opacity-25">
                                <div class="card-body d-flex flex-column justify-content-center align-items-sm-center" style=" height: 250px;">
                                    <h2 class="card-title">Total Students</h2>
                                    <h4 class="card-text fw-bold">@userCount Active Student</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            
        </div>

        <div id="dashboardForm" style="display: none;" class="px-24">
                <div class="d-flex flex-row justify-content-between p-4">
                    <h2>Courses</h2>
                    <a asp-controller="Dashboard" asp-action="New" class="btn btn-success">New Course +</a>

                </div>
          <table class="table table-striped">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Course Name</th>
                <th scope="col">Category</th>
                <th scope="col">Number Of Lessons</th>
                <th scope="col">Level</th>
                <th scope="col">Student enrolled</th>
                <th>Edit</th>
                <th>Delete</th>
              </tr>
            </thead>
            <tbody>
             @foreach (var course in Model.Courses)
                        {
                            <tr>
                                <th scope="row">@course.Id</th>
                                <td>@course.Name</td>
                                <td>@course.Category</td>
                                <td>@course.NumLessons Lessons</td>
                                <td>@course.Level</td>
                                <td>students</td>
                                <td><a asp-controller="Dashboard" asp-action="Edit" asp-route-Id="@course.Id" type="button" class="btn btn-primary">Edit</a></td>
                                <td>
                                    <form asp-controller="Dashboard" asp-action="Delete" method="post">
                                        <input type="hidden" name="Id" value="@course.Id" />
                                        <button type="submit" class="btn btn-danger">Delete</button>
                                    </form>
                                </td>
                            </tr>
                        }
                    </tbody>
          </table>
        </div>



            <div id="usersForm" style="display: none;">
            <h2>Users Form</h2>
               <table class="table table-striped">
                   <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">User Name</th>
                        <th scope="col">Email</th>
                        <th scope="col">Is Admin</th>
                        <th scope="col">Regestration Date</th>
                        <th scope="col">Courses Enrolled</th>
                        <th>Banned</th>
                       </tr>
                   </thead>
                   <tbody>
                        @foreach (var user in Model.Users)
                        {
                            <tr>
                                <th scope="row">@user.Id</th>
                                <td>@user.Username</td>
                                <td>@user.Email</td>
                                <td>@user.IsAdmin</td>
                                <td>@user.RegistrationDate</td>
                                <td>
                                    <select class="form-select">
                                        <option>Num Of Courses = 2</option>
                                        <option>Java 101</option>
                                        <option>Mastering Python </option>
                                    </select>
                                </td>
                                <td><button type="button" class="btn btn-danger">Banned</button></td>
                            </tr>
                        }
                    </tbody>
               </table>
        </div>


    </div>
  </div>
  <script>

    const navLinks = document.querySelectorAll('.nav-link');

  // Function to add active class and display the corresponding form
  function handleNavLinkClick(event) {
    event.preventDefault(); // Prevent default link behavior

    // Remove active class from all links
    navLinks.forEach(link => link.classList.remove('active'));

    // Add active class to the clicked link
    event.target.classList.add('active');

    // Get the data-form attribute value (assuming you added it)
    const formId = event.target.dataset.form;

    // Hide all forms
    const allForms = document.querySelectorAll('.form-container'); // Adjust selector if needed
    allForms.forEach(form => form.style.display = 'none');

    // Show the corresponding form based on data-form attribute
    if (formId) {
      document.getElementById(formId).style.display = 'block';
    }
  }

  // Add click event  to all navigation links
  navLinks.forEach(link => link.addEventListener('click', handleNavLinkClick));
    function changeHeading(text) {
      document.getElementById('heading').innerText = text;
    }
    
    function showHomeForm() {
      hideAllForms();
      document.getElementById('homeForm').style.display = 'block';
    }
    
    function showDashboardForm() {
      hideAllForms();
      document.getElementById('dashboardForm').style.display = 'block ';
    }
    
    function showUsersForm() {
      hideAllForms();
            document.getElementById('usersForm').style.display = 'block';
    }

    function hideAllForms() {
      document.getElementById('homeForm').style.display = 'none';
      document.getElementById('dashboardForm').style.display = 'none';
      document.getElementById('usersForm').style.display = 'none';
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>